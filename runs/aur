#!/usr/bin/env bash

# AUR Packages Run
# Initializes and updates AUR package submodules

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DOTFILES_DIR="$(dirname "$SCRIPT_DIR")"

echo "Setting up AUR package submodules..."

cd "$DOTFILES_DIR"

# Check if we're in a git repository using git command
if ! git rev-parse --git-dir >/dev/null 2>&1; then
    echo "Error: Not in a git repository"
    exit 1
fi

# Initialize and update AUR submodules only
echo "Initializing and updating AUR package submodules..."
git submodule update --init --recursive aur/

echo "AUR package submodules setup completed!"
echo "All AUR package submodules have been initialized and updated."