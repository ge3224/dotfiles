- name: Install lightdm greeter
  community.general.pacman:
    name:
      - lightdm-webkit2-greeter
    state: present

# sudo cp -r ./backgrounds/* /usr/share/backgrounds/
- name: Copy background images
  copy:
    src: /home/{{ username }}/Projects/dotfiles/bijiben/ansible/images/backgrounds/
    dest: /usr/share/backgrounds/
    force: False
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: u+rw,g+r,o--

# sudo cp -r ./pixmaps/* /usr/share/pixmaps/
- name: Copy pixmaps
  copy:
    src: /home/{{ username }}/Projects/dotfiles/bijiben/ansible/images/pixmaps/
    dest: /usr/share/pixmaps/
    force: False
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: u+rw,g+r,o--

# Determine if a path exists and is a directory.
- name: Get stats of /etc/lightdm/
  ansible.builtin.stat:
    path: /etc/lightdm
  register: p

- name: Remove any kitty config that is not a symlink
  ansible.builtin.file:
    path: /etc/lightdm
    state: absent
  when: p.stat.isdir is defined and p.stat.isdir

# Create a symlink
- name: Creating a symlink from repo lightdm to /etc/
  ansible.builtin.file:
    src: /home/{{ username }}/Projects/dotfiles/bijiben/ansible/roles/common/files/user_home/lightdm
    dest: /etc/lightdm
    state: link

# Determine if a path exists and is a directory.
- name: Get stats on `/etc/lightdm/`
  ansible.builtin.stat:
    path: /etc/lightdm
  register: p

- name: Remove any `lightdm` directory that is not a symlink
  ansible.builtin.file:
    path: /etc/lightdm
    state: absent
  when: p.stat.isdir is defined and p.stat.isdir

# Create a symlink
- name: Creating a symlink from repo `lightdm` to `/etc/`
  ansible.builtin.file:
    src: /home/{{ username }}/Projects/dotfiles/bijiben/ansible/roles/common/files/user_home/lightdm
    dest: /etc/lightdm
    state: link
